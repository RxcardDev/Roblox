-- ðŸ“‹ Copia automÃ¡tica del link de LootLabs
if setclipboard then
    setclipboard("https://loot-link.com/s?Vv9hbwuo")
end

-- ðŸ§  Obtener el nombre del juego de forma segura
local MarketplaceService = game:GetService("MarketplaceService")
local success, info = pcall(function()
    return MarketplaceService:GetProductInfo(game.PlaceId)
end)

local gameName = "Unknown Game"
if success and info and info.Name then
    gameName = info.Name
end

-- ðŸ’¡ Guardar Lighting original por si se modifica luego
local Lighting = game:GetService("Lighting")
local originalClockTime = Lighting.ClockTime
local originalBrightness = Lighting.Brightness
local originalAmbient = Lighting.Ambient
local originalGlobalShadows = Lighting.GlobalShadows

-- ðŸ§± Cargar Rayfield UI
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()
local baboonTagPlaceId = 73908022013371

-- ðŸªŸ Crear ventana principal (sin Discord, sin extras que rompen)
local Window = Rayfield:CreateWindow({
    Name = "Femboy Hub | " .. gameName,
    LoadingTitle = "Ricardo's Interface Suite",
    LoadingSubtitle = "Custom Scripts & Features",
    Theme = "Dark", -- Tema compatible con Delta
    ToggleUIKeybind = Enum.KeyCode.RightShift,
    DisableRayfieldPrompts = false,

    ConfigurationSaving = {
        Enabled = true,
        FolderName = "FemboyHubConfigs",
        FileName = gameName .. "_Config"
    },

    KeySystem = true,
    KeySettings = {
        Title = "Femboy Hub Access",
        Subtitle = "Restricted Entry",
        Note = "Complete Loot Labs Link to get your key (link Already Copied)",
        FileName = "FemboyHubKey",
        SaveKey = false,
        GrabKeyFromSite = false,
        Key = {"RicardoKey123"} -- ðŸ”‘ Tu key personalizada
    }
})

-- âœ… ConfirmaciÃ³n visual de carga
task.delay(0.5, function()
    Rayfield:Notify({
        Title = "System",
        Content = "Script Successfully Loaded âœ…",
        Duration = 4,
        Image = 4483362458
    })
end)
-- =======================
-- Silent Aim Variables
-- =======================
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera
local Mouse = LocalPlayer:GetMouse()

local SilentAimEnabled = false
local ShowCircle = true
local SilentAimFOV = 150
local SilentAimSmoothness = 8
local WallCheckEnabled = true
local AimTargetPart = "HumanoidRootPart" -- âœ… Dropdown inicial

local FOVCircle
local FOVGui
local currentLockedTarget = nil
local lastNotifyTime = 0

-- =======================
-- Circle Creation
-- =======================
local function createCircle()
    if FOVCircle then FOVCircle:Destroy() FOVCircle = nil end
    if FOVGui then FOVGui:Destroy() FOVGui = nil end

    local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
    FOVGui = Instance.new("ScreenGui")
    FOVGui.Name = "FOVGui_Ricardo"
    FOVGui.ResetOnSpawn = false
    FOVGui.IgnoreGuiInset = true
    FOVGui.DisplayOrder = 9999
    FOVGui.Parent = PlayerGui

    FOVCircle = Instance.new("Frame")
    FOVCircle.Size = UDim2.new(0, SilentAimFOV*2, 0, SilentAimFOV*2)
    FOVCircle.AnchorPoint = Vector2.new(0.5,0.5)
    FOVCircle.Position = UDim2.new(0.5,0,0.5,0)
    FOVCircle.BackgroundTransparency = 1
    FOVCircle.Parent = FOVGui

    local stroke = Instance.new("UIStroke")
    stroke.Thickness = 2
    stroke.Color = Color3.fromRGB(0,200,255)
    stroke.Parent = FOVCircle

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(1,0)
    corner.Parent = FOVCircle
end

local function destroyCircle()
    if FOVCircle then FOVCircle:Destroy() FOVCircle = nil end
    if FOVGui then FOVGui:Destroy() FOVGui = nil end
end

LocalPlayer.CharacterAdded:Connect(function()
    task.delay(0.25, function()
        if ShowCircle and SilentAimEnabled then
            createCircle()
        end
    end)
end)

-- =======================
-- Rayfield UI
-- =======================
local TabMain = Window:CreateTab("Main", 4483362458)
TabMain:CreateSection("Silent Aim")

TabMain:CreateToggle({
    Name = "Enable Silent Aim",
    CurrentValue = false,
    Callback = function(v)
        SilentAimEnabled = v
        if v and ShowCircle then
            createCircle()
        else
            destroyCircle()
        end
    end
})

TabMain:CreateToggle({
    Name = "Show Circle",
    CurrentValue = true,
    Callback = function(v)
        ShowCircle = v
        if not v then
            destroyCircle()
        elseif v and SilentAimEnabled then
            createCircle()
        end
    end
})

TabMain:CreateSlider({
    Name = "Silent Aim FOV",
    Range = {50,500},
    Increment = 10,
    Suffix = "px",
    CurrentValue = SilentAimFOV,
    Callback = function(v)
        SilentAimFOV = v
        if FOVCircle then
            FOVCircle.Size = UDim2.new(0, SilentAimFOV*2, 0, SilentAimFOV*2)
        end
    end
})

TabMain:CreateSlider({
    Name = "Silent Aim Smoothness",
    Range = {1,20},
    Increment = 1,
    Suffix = "lvl",
    CurrentValue = SilentAimSmoothness,
    Callback = function(v) SilentAimSmoothness = v end
})

TabMain:CreateToggle({
    Name = "Wall Check",
    CurrentValue = true,
    Callback = function(v)
        WallCheckEnabled = v
    end
})

-- âœ… Nuevo Dropdown para elegir parte del cuerpo
TabMain:CreateDropdown({
    Name = "Aim Target",
    Options = {"HumanoidRootPart","Head"},
    CurrentOption = "HumanoidRootPart",
    Callback = function(v)
        AimTargetPart = v
    end
})

-- =======================
-- Wall Check Function
-- =======================
local function IsVisible(targetPart)
    if not targetPart then return false end
    local origin = Camera.CFrame.Position
    local direction = (targetPart.Position - origin)
    local raycastParams = RaycastParams.new()
    raycastParams.FilterDescendantsInstances = {LocalPlayer.Character}
    raycastParams.FilterType = Enum.RaycastFilterType.Blacklist

    local result = workspace:Raycast(origin, direction, raycastParams)
    if result then
        return result.Instance:IsDescendantOf(targetPart.Parent)
    end
    return true
end

-- =======================
-- Target Selection
-- =======================
local function getFOVCenter()
    local char = LocalPlayer.Character
    local hum = char and char:FindFirstChildOfClass("Humanoid")
    local inFirstPerson = hum and (Camera.Focus.Position - Camera.CFrame.Position).Magnitude < 1

    if inFirstPerson then
        return Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
    else
        return Vector2.new(Mouse.X, Mouse.Y)
    end
end

local function getClosestTarget()
    local center = getFOVCenter()
    local shortest = SilentAimFOV
    local closest = nil

    for _, p in ipairs(Players:GetPlayers()) do
        if p ~= LocalPlayer and p.Character then
            local targetPart = p.Character:FindFirstChild(AimTargetPart)
            if targetPart then
                local pos,onScreen = Camera:WorldToViewportPoint(targetPart.Position)
                if onScreen then
                    local dist = (center - Vector2.new(pos.X,pos.Y)).Magnitude
                    if dist <= SilentAimFOV and dist < shortest then
                        if not WallCheckEnabled or IsVisible(targetPart) then
                            shortest = dist
                            closest = p
                        end
                    end
                end
            end
        end
    end
    return closest
end

-- =======================
-- Extra Toggle: Aim at Head
-- =======================
local AimAtHead = false

TabMain:CreateToggle({
    Name = "Aim at Head",
    CurrentValue = false,
    Callback = function(v)
        AimAtHead = v
    end
})

-- =======================
-- Silent Aim Loop (modificado)
-- =======================
RunService.RenderStepped:Connect(function()
    if FOVCircle and ShowCircle then
        local center = getFOVCenter()
        FOVCircle.Position = UDim2.new(0, center.X, 0, center.Y)
        FOVCircle.Size = UDim2.new(0, SilentAimFOV*2, 0, SilentAimFOV*2)
    end

    if not SilentAimEnabled then currentLockedTarget=nil return end

    local target = getClosestTarget()
    if target and target.Character then
        -- âœ… Elegir parte segÃºn toggle
        local targetPart
        if AimAtHead then
            targetPart = target.Character:FindFirstChild("Head")
        else
            targetPart = target.Character:FindFirstChild("HumanoidRootPart")
        end

        if targetPart then
            if target ~= currentLockedTarget and (tick()-lastNotifyTime)>0.5 then
                currentLockedTarget = target
                lastNotifyTime = tick()
                Rayfield:Notify({
                    Title="Silent Aim",
                    Content="Locked on: "..target.Name..(AimAtHead and " (Head)" or " (HRP)"),
                    Duration=1.6,
                    Image=4483362458
                })
            end
            local camPos = Camera.CFrame.Position
            local targetPos = targetPart.Position
            local look = CFrame.new(camPos,targetPos)
            Camera.CFrame = Camera.CFrame:Lerp(look, math.clamp(SilentAimSmoothness/20,0.02,0.9))
        end
    else
        currentLockedTarget=nil
    end
end)
-- =======================
-- TAB VISUALS (ESP con Boxes y Tracers)
-- =======================
local TabVisuals = Window:CreateTab("Visuals", 4483362458)
TabVisuals:CreateSection("ESP")

local ESPEnabled, ShowNames, ShowDistance, ShowHealth = false, false, false, false
local ShowBoxes, ShowTracers, ShowHighlight = false, false, true

local Camera = workspace.CurrentCamera
local RunService = game:GetService("RunService")

--  Box
local function createBox(player)
    local box = Drawing.new("Square")
    box.Visible = false
    box.Color = Color3.fromRGB(0,255,0)
    box.Thickness = 2
    box.Filled = false
    return box
end

-- Tracer
local function createTracer(player)
    local line = Drawing.new("Line")
    line.Visible = false
    line.Color = Color3.fromRGB(255,255,0)
    line.Thickness = 1.5
    return line
end

--  ESP 
local function createESP(player, localPlayer)
    -- Highlight
    if ShowHighlight and player.Character then
        local highlight = Instance.new("Highlight")
        highlight.Parent = player.Character
        highlight.FillColor = Color3.fromRGB(255,0,0)
        highlight.OutlineColor = Color3.fromRGB(255,255,255)
        highlight.Adornee = player.Character
        highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop -- ðŸ”¥ se ve a travÃ©s de paredes
    end

    -- Billboard 
    local billboard = Instance.new("BillboardGui")
    billboard.Size = UDim2.new(0,140,0,28)
    billboard.Adornee = player.Character:WaitForChild("HumanoidRootPart")
    billboard.AlwaysOnTop = true
    billboard.Parent = player.Character

    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(1,0,1,0)
    textLabel.BackgroundTransparency = 1
    textLabel.TextColor3 = Color3.fromRGB(255,255,255)
    textLabel.TextStrokeTransparency = 0
    textLabel.Font = Enum.Font.SourceSansBold
    textLabel.TextSize = 12
    textLabel.Parent = billboard

    -- Box y Tracer
    local box = createBox(player)
    local tracer = createTracer(player)

    RunService.RenderStepped:Connect(function()
        if ESPEnabled and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local hrp = player.Character.HumanoidRootPart
            local pos, onScreen = Camera:WorldToViewportPoint(hrp.Position)

            
            local infoParts = {}
            if ShowNames then table.insert(infoParts, player.Name) end
            if ShowDistance and localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
                local dist = (localPlayer.Character.HumanoidRootPart.Position - hrp.Position).Magnitude
                table.insert(infoParts, tostring(math.floor(dist)).." studs")
            end
            if ShowHealth and player.Character:FindFirstChild("Humanoid") then
                table.insert(infoParts, "HP: "..tostring(math.floor(player.Character.Humanoid.Health)))
            end
            textLabel.Text = #infoParts>0 and table.concat(infoParts," | ") or ""

            -- Box
            if ShowBoxes and onScreen then
                local head = player.Character:FindFirstChild("Head")
                local rootPos = Camera:WorldToViewportPoint(hrp.Position)
                local headPos = Camera:WorldToViewportPoint(head.Position)
                local height = math.abs(rootPos.Y - headPos.Y)
                local width = height/2
                box.Size = Vector2.new(width, height)
                box.Position = Vector2.new(rootPos.X - width/2, rootPos.Y - height/2)
                box.Visible = true
            else
                box.Visible = false
            end

            -- Tracer
            if ShowTracers and onScreen then
                tracer.From = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y)
                tracer.To = Vector2.new(pos.X, pos.Y)
                tracer.Visible = true
            else
                tracer.Visible = false
            end
        else
            box.Visible = false
            tracer.Visible = false
        end
    end)
end

TabVisuals:CreateToggle({
    Name = "Enable ESP (Turn On/Off to Unbug)",
    CurrentValue = false,
    Flag = "ESP",
    Callback = function(v)
        ESPEnabled = v
        local lp = game.Players.LocalPlayer
        if v then
            for _,p in pairs(game.Players:GetPlayers()) do
                if p~=lp then
                    createESP(p, lp)
                    p.CharacterAdded:Connect(function()
                        if ESPEnabled then createESP(p, lp) end
                    end)
                end
            end
        else
            -- limpiar
            for _,p in pairs(game.Players:GetPlayers()) do
                if p.Character then
                    for _,c in pairs(p.Character:GetChildren()) do
                        if c:IsA("Highlight") or c:IsA("BillboardGui") then c:Destroy() end
                    end
                end
            end
        end
    end
})


TabVisuals:CreateToggle({Name="Show Names",CurrentValue=false,Flag="Names",Callback=function(v) ShowNames=v end})
TabVisuals:CreateToggle({Name="Show Distance",CurrentValue=false,Flag="Distance",Callback=function(v) ShowDistance=v end})
TabVisuals:CreateToggle({Name="Show Health",CurrentValue=false,Flag="Health",Callback=function(v) ShowHealth=v end})
TabVisuals:CreateToggle({Name="Show Boxes",CurrentValue=false,Flag="Boxes",Callback=function(v) ShowBoxes=v end})
TabVisuals:CreateToggle({Name="Show Tracers",CurrentValue=false,Flag="Tracers",Callback=function(v) ShowTracers=v end})
TabVisuals:CreateToggle({Name="Show Highlight",CurrentValue=true,Flag="Highlight",Callback=function(v) ShowHighlight=v end})

-- =======================
-- TAB GRAPHICS
-- =======================
local TabGraphics = Window:CreateTab("Graphics", 4483362458)
TabGraphics:CreateSection("OptimizaciÃ³n GrÃ¡fica")


TabGraphics:CreateToggle({
    Name = "Eliminar Texturas",
    CurrentValue = false,
    Flag = "NoTextures",
    Callback = function(v)
        for _,x in pairs(workspace:GetDescendants()) do 
            if x:IsA("Texture") or x:IsA("Decal") then 
                x.Transparency = v and 1 or 0 
            end 
        end
    end
})


TabGraphics:CreateToggle({
    Name = "IluminaciÃ³n Clara (dÃ­a eterno)",
    CurrentValue = false,
    Flag = "BrightLighting",
    Callback = function(v)
        if v then 
            Lighting.ClockTime = 12 
            Lighting.Brightness = 2 
            Lighting.Ambient = Color3.fromRGB(255,255,255) 
            Lighting.GlobalShadows = false
        else 
            Lighting.ClockTime = originalClockTime 
            Lighting.Brightness = originalBrightness 
            Lighting.Ambient = originalAmbient 
            Lighting.GlobalShadows = originalGlobalShadows 
        end
    end
})


TabGraphics:CreateToggle({
    Name = "Mejora de FPS",
    CurrentValue = false,
    Flag = "FPSBoost",
    Callback = function(v)
        if v then 
            settings().Rendering.QualityLevel = Enum.QualityLevel.Level01 
            Lighting.GlobalShadows = false 
            Lighting.FogEnd = 9e9
        else 
            settings().Rendering.QualityLevel = Enum.QualityLevel.Automatic 
            Lighting.GlobalShadows = true 
            Lighting.FogEnd = 1000 
        end
    end
})
